import{d as b,u as P,c as x,a,w as t,b as e,e as R,o as g,f as m,t as c,g as S,h as $,i as w,F as U,j as h,r,k as C}from"./index-DdbpnQh1.js";import{_ as k}from"./createLucideIcon-DfyR5A8Z.js";import{_ as B,C as K,a as N,b as E,c as _}from"./circle-alert-Buqbgg0e.js";import{_ as j,a as A,b as D,c as F,d as G}from"./CardTitle.vue_vue_type_script_setup_true_lang-K1gKcX0w.js";const M={class:"flex items-center justify-center min-h-screen bg-gray-100"},T={class:"text-sm text-center"},q={class:"text-muted-foreground"},Q=b({__name:"Login",setup(z){const s=r(!0),i=r(""),n=r(""),v=r(""),d=r(""),f=r(!1),u=r(""),L=R(),y=P(),p=async()=>{if(u.value="",!i.value||!n.value){u.value="Please enter username and password";return}if(!s.value){if(n.value!==v.value){u.value="Passwords do not match";return}if(!d.value){u.value="Please enter email";return}}f.value=!0;try{s.value?(await y.login({username:i.value,password:n.value},{silent:!0}),C.success("Login Successful"),L.push("/")):(await y.register({username:i.value,password:n.value,email:d.value},{silent:!0}),C.success("Registration Successful. Please Login."),s.value=!0,n.value="",v.value="",d.value="")}catch(V){u.value=V.message}finally{f.value=!1}};return(V,l)=>(g(),x("div",M,[a(e(j),{class:"w-[350px]"},{default:t(()=>[a(e(A),null,{default:t(()=>[a(e(D),null,{default:t(()=>[m(c(s.value?"Login to GoChat":"Register for GoChat"),1)]),_:1})]),_:1}),a(e(F),{class:"space-y-4"},{default:t(()=>[u.value?(g(),S(e(B),{key:0,variant:"destructive"},{default:t(()=>[a(e(K),{class:"w-4 h-4"}),a(e(N),null,{default:t(()=>[...l[5]||(l[5]=[m("Error",-1)])]),_:1}),a(e(E),null,{default:t(()=>[m(c(u.value),1)]),_:1})]),_:1})):$("",!0),a(e(_),{modelValue:i.value,"onUpdate:modelValue":l[0]||(l[0]=o=>i.value=o),placeholder:"Username"},null,8,["modelValue"]),a(e(_),{modelValue:n.value,"onUpdate:modelValue":l[1]||(l[1]=o=>n.value=o),type:"password",placeholder:"Password",onKeyup:w(p,["enter"])},null,8,["modelValue"]),s.value?$("",!0):(g(),x(U,{key:1},[a(e(_),{modelValue:v.value,"onUpdate:modelValue":l[2]||(l[2]=o=>v.value=o),type:"password",placeholder:"Confirm Password",onKeyup:w(p,["enter"])},null,8,["modelValue"]),a(e(_),{modelValue:d.value,"onUpdate:modelValue":l[3]||(l[3]=o=>d.value=o),type:"email",placeholder:"Email",onKeyup:w(p,["enter"])},null,8,["modelValue"])],64))]),_:1}),a(e(G),{class:"flex flex-col gap-2"},{default:t(()=>[a(e(k),{class:"w-full",onClick:p,disabled:f.value},{default:t(()=>[m(c(f.value?s.value?"Logging in...":"Registering...":s.value?"Login":"Register"),1)]),_:1},8,["disabled"]),h("div",T,[h("span",q,c(s.value?"Don't have an account?":"Already have an account?"),1),a(e(k),{variant:"link",class:"p-0 h-auto ml-1",onClick:l[4]||(l[4]=o=>{s.value=!s.value,u.value=""})},{default:t(()=>[m(c(s.value?"Register":"Login"),1)]),_:1})])]),_:1})]),_:1})]))}});export{Q as default};
